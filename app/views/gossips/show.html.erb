<body class="d-flex flex-column h-100">
  <div class="container">
    <main role="main" class="my-auto">
    <h1 class="mt-5"><%= @gossips.find(@index).title%></h1>
    <p class="lead">
    <%=link_to "#{@gossips.find(@index).user.first_name} #{@gossips.find(@index).user.last_name}", user_path(@gossips.find(@index).user.id), :class => "nav-link"%>
    </p>
    <p>Contenue : <%= @gossips.find(@index).content%><br/></p>
    <p>  Créé le <%= @gossips.find(@index).created_at.strftime("%d/%m/%Y")%></p>
    <p><%=link_to "Éditer", edit_gossip_path(@index), :class => "btn btn-lg btn-secondary"%>
    <%=link_to "Supprimer", gossip_path(@index), :class => "btn btn-lg btn-danger",  :data => {:confirm => 'Êtes-vous sûr ?', :method => 'DELETE'}%></p>
    <p>  Tags : <%=@tags_string%></p>
      Comments : 
      <% @gossips.find(@index).comments.map do |i| %>
      <p>
        <%=i.content%> - <%=i.user.first_name%> <%=i.user.last_name%> <%=link_to "Éditer", edit_gossip_comment_path(i.id)%>
        <%@comments.where(commentable_id: i.id).map do |j| %>
      <br/>➡ <%=j.content%> - <%=j.user.first_name%> <%=j.user.last_name%> <%=i.user.last_name%> <%=link_to "Éditer", edit_gossip_comment_path(j.id)%>
        <% end %>      
      </p>
      <% end %>  
      <div class="col-md-12 order-md-1 my-4">
      <h4>Add a comment:</h4>
      <%= form_with(model: [ @gossip, @gossip.comments.build ], local: true) do |form| %>
      <%= form.hidden_field :user_id, value: 1 %>
        <p>
          <%= form.label :content %><br>
          <%= form.text_area :content, class: "form-control" %>
        </p>
        <p>
          <%= form.submit value: "Valider",  class: "btn btn-primary btn-lg btn-block" %>
        </p>
      <% end %>    
    </div>
    </main>
  </div>
</body>